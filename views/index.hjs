<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/stylesheets/style.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto" type="text/css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css">
  <title>exTrack</title>
</head>
<body>
  <div class="container">

    <!-- Title bar -->
    <div class="title-bar">
      <span>exTrack</span>
      <span class="float-right">
        <span class="small-text">{{ username }}</span>
        <a href="/settings"><i class="fas fa-cog"></i></a>
      </span>
    </div>
    <!-- End Title bar -->

    <!-- App content -->
    <div class="content">
      
      <!-- Time bar -->
      <p class="small-text">
        {{ strMonth }}, {{ year }}
        <a href="#" onclick="toggleTimeChooser()"><i class="far fa-clock"></i></a>
      </p>
      <div id="time-chooser">
        <form method="POST" action="/">
          <select id="month" name="month">
            <option value="1">January</option>
            <option value="2">February</option>
            <option value="3">March</option>
            <option value="4">April</option>
            <option value="5">May</option>
            <option value="6">June</option>
            <option value="7">July</option>
            <option value="8">August</option>
            <option value="9">September</option>
            <option value="10">October</option>
            <option value="11">November</option>
            <option value="12">December</option>
          </select>
          <input type="number" name="year" value="{{ year }}">
          <button type="submit" class="blue-button">Go</button>
        </form>
      </div>
      <!-- End Time bar -->
      
      <!-- Income -->
      <div>
        <a href="/income">
          <button class="big-grey-button">Income: {{ income }}</button>
        </a>
      </div>
      <!-- End Income -->
      
      <!-- Expenses -->
      <div>
        <button class="big-red-button" onclick="toggleExpenseList()">Expenses: {{ totalExpenses }}</button>
        <div id="expense-list" class="padding-left">
          <div><a href="/expense/food?month={{ month }}&year={{ year }}">
            <button class="grey-button">Food: {{ foodExpenses }}</button>
          </a></div>
          <div><a href="/expense/house?month={{ month }}&year={{ year }}">
            <button class="grey-button">House: {{ houseExpenses }}</button>
          </a></div>
          <div><a href="/expense/health?month={{ month }}&year={{ year }}">
            <button class="grey-button">Health: {{ healthExpenses }}</button>
          </a></div>
          <div><a href="/expense/transport?month={{ month }}&year={{ year }}">
            <button class="grey-button">Transport: {{ transportExpenses }}</button>
          </a></div>
          <div><a href="/expense/studying?month={{ month }}&year={{ year }}">
            <button class="grey-button">Studying: {{ studyingExpenses }}</button>
          </a></div>
          <div><a href="/expense/entertainment?month={{ month }}&year={{ year }}">
            <button class="grey-button">Entertainment: {{ entertainmentExpenses }}</button>
          </a></div>
          <div><a href="/expense/others?month={{ month }}&year={{ year }}">
            <button class="grey-button">Others: {{ othersExpenses }}</button>
          </a></div>
          <div><a href="/addexpense">
            <button class="blue-button">Add expense</button>
          </a></div>
        </div>
      </div>
      <!-- End Expenses -->

      <!-- Balance -->
      <div>
        <button class="big-blue-button">Balance: {{ balance }}</button>
      </div>
      <!-- End Balance -->
      
    </div>
    <!-- End App content -->

  </div>
  <script>
    // set month selector to the month sent by server
    document.getElementById('month').value = '{{ month }}';

    // toggle elements on off
    const divTimeChooser = document.getElementById('time-chooser');
    const divExpenseList = document.getElementById('expense-list');
    
    divTimeChooser.style.display = 'none';
    divExpenseList.style.display = 'none';

    const toggleTimeChooser = () => {
      if (divTimeChooser.style.display === 'none') divTimeChooser.style.display = 'block';
      else if (divTimeChooser.style.display === 'block') divTimeChooser.style.display = 'none';
    };

    const toggleExpenseList = () => {
      if (divExpenseList.style.display === 'none') divExpenseList.style.display = 'block';
      else if (divExpenseList.style.display === 'block') divExpenseList.style.display = 'none';
    };
  </script>
</body>
</html>